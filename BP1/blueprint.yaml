# This blueprint will deploy a linux machine and install Tomcat on it. You can deploy to AWS or vSphere. Once the machine is deployed copy/paste the IP address into a browser to see the tomcat landing page.
formatVersion: 1
name: Ansible-Tomcat-Do-NOT-Modify
version: 1
inputs: {}
resources:
  Cloud_Machine_1:
    type: Cloud.Ansible
    properties:
      host: '${resource["Ansible-apache"].*}'
      osType: linux
      account: Ansible Demo
      username: root
      privateKeyFile: /root/.ssh/id_rsa
      password: Asdf#123
      playbookRunUserPassword: Asdf#123
      inventoryFile: /etc/ansible/hosts
      playbooks:
        provision:
          - /etc/ansible/apache.yml
      maxConnectionRetries: 10
  Ansible-apache:
    type: Cloud.Machine
    properties:
      image: CentOs
      flavor: Medium
      customizationSpec: Linux-cust
      constraints:
        - tag: 'env:compute'
      networks:
        - network: '${resource.Cloud_Network_1.id}'
          assignment: static
  Cloud_Network_1:
    type: Cloud.Network
    properties:
      networkType: existing
      constraints:
        - tag: 'env:compute'
